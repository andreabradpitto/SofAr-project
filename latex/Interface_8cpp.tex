\hypertarget{Interface_8cpp}{}\doxysection{V-\/rep/src/\+Interface.cpp File Reference}
\label{Interface_8cpp}\index{V-\/rep/src/Interface.cpp@{V-\/rep/src/Interface.cpp}}
{\ttfamily \#include \char`\"{}stdlib.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ros/ros.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}std\+\_\+msgs/\+Int8.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}sensor\+\_\+msgs/\+Joint\+State.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}string.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}sys/types.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}signal.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{Interface_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}} (int argc, char $\ast$$\ast$argv)
\begin{DoxyCompactList}\small\item\em The main function acts as a user interface for simulation handling thanks to R\+OS publishers. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{Interface_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{Interface_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{Interface.cpp@{Interface.cpp}!main@{main}}
\index{main@{main}!Interface.cpp@{Interface.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}



The main function acts as a user interface for simulation handling thanks to R\+OS publishers. 

The command \textquotesingle{}help\textquotesingle{} is for knowing all the possible interface functions

The command \textquotesingle{}start\textquotesingle{} is for starting the simulation

The command \textquotesingle{}calibration\textquotesingle{} is for making the I\+MU reference system coincide with the human end effector reference system

The command \textquotesingle{}pause\textquotesingle{} is for pausing the simulation in order to restart from the last reached configuration

The command \textquotesingle{}stop\textquotesingle{} is for stopping the simulation leading the robot arm to the default configuration

The command \textquotesingle{}set\+\_\+default\textquotesingle{} is for setting a desired default configuration for each one of the 7 joints. In the original default configuration each joint is set to 0

The command \textquotesingle{}exit\textquotesingle{} is for closing the user interface, all the running topics and the simulator environment

Definition at line 35 of file Interface.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{36   \{}
\DoxyCodeLine{37 }
\DoxyCodeLine{38   ros::init(argc, argv, \textcolor{stringliteral}{"{}Test"{}}); \textcolor{comment}{//initialize the ros sys, giving it a name }}
\DoxyCodeLine{39 }
\DoxyCodeLine{40   ros::NodeHandle n1; \textcolor{comment}{//obj of NodeHandle class}}
\DoxyCodeLine{41 }
\DoxyCodeLine{42   ros::Publisher SimPub = n1.advertise<std\_msgs::Int8>(\textcolor{stringliteral}{"{}handleSimulation"{}}, 1000); \textcolor{comment}{//publisher advertisement }}
\DoxyCodeLine{43   ros::Publisher SimStatePub = n1.advertise<sensor\_msgs::JointState>(\textcolor{stringliteral}{"{}default\_state"{}}, 1000); \textcolor{comment}{//publisher advertisement }}
\DoxyCodeLine{44   ros::Publisher ExitPub = n1.advertise<std\_msgs::Int8>(\textcolor{stringliteral}{"{}exitSimulation"{}}, 1000); \textcolor{comment}{//publisher advertisement }}
\DoxyCodeLine{45   }
\DoxyCodeLine{46   \textcolor{keywordtype}{char} \textcolor{keywordtype}{string}[20];}
\DoxyCodeLine{47   }
\DoxyCodeLine{48   ros::Rate loop\_rate(10); \textcolor{comment}{//loop rate set at 10 Hz}}
\DoxyCodeLine{49   printf(\textcolor{stringliteral}{"{}To activate an action, digit your command and press enter.\(\backslash\)nFor a list of commands use 'help' and press enter\(\backslash\)n"{}});}
\DoxyCodeLine{50   }
\DoxyCodeLine{51   \textcolor{comment}{//while loop -\/> we want to continue to publish messages, as long the node is alive}}
\DoxyCodeLine{52   \textcolor{keywordflow}{while} (ros::ok())     }
\DoxyCodeLine{53   \{}
\DoxyCodeLine{54         }
\DoxyCodeLine{55         }
\DoxyCodeLine{56         \textcolor{comment}{//Main body}}
\DoxyCodeLine{57         printf(\textcolor{stringliteral}{"{}Digit your command and press enter: "{}});}
\DoxyCodeLine{58         scanf(\textcolor{stringliteral}{"{}\%s"{}},\textcolor{keywordtype}{string});}
\DoxyCodeLine{59 }
\DoxyCodeLine{61         \textcolor{keywordflow}{if}(strcmp(\textcolor{keywordtype}{string},\textcolor{stringliteral}{"{}help"{}})==0)\{}
\DoxyCodeLine{62             printf(\textcolor{stringliteral}{"{}-\/ start\(\backslash\)n-\/ calibration\(\backslash\)n-\/ pause\(\backslash\)n-\/ stop\(\backslash\)n-\/ set\_default\(\backslash\)n-\/ exit\(\backslash\)n"{}});}
\DoxyCodeLine{63 }
\DoxyCodeLine{65         \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(\textcolor{keywordtype}{string},\textcolor{stringliteral}{"{}start"{}})==0)\{}
\DoxyCodeLine{66             std\_msgs::Int8 msg;}
\DoxyCodeLine{67             msg.data=1;}
\DoxyCodeLine{68             \textcolor{comment}{//command message publishing}}
\DoxyCodeLine{69             SimPub.publish(msg);}
\DoxyCodeLine{70 }
\DoxyCodeLine{72         \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(\textcolor{keywordtype}{string},\textcolor{stringliteral}{"{}calibration"{}})==0)\{}
\DoxyCodeLine{73             std\_msgs::Int8 msg;}
\DoxyCodeLine{74             msg.data=3;}
\DoxyCodeLine{75             \textcolor{comment}{//command message publishing}}
\DoxyCodeLine{76             SimPub.publish(msg);}
\DoxyCodeLine{77 }
\DoxyCodeLine{79         \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(\textcolor{keywordtype}{string},\textcolor{stringliteral}{"{}pause"{}})==0)\{}
\DoxyCodeLine{80             std\_msgs::Int8 msg;}
\DoxyCodeLine{81             msg.data=2;}
\DoxyCodeLine{82             \textcolor{comment}{//command message publishing}}
\DoxyCodeLine{83             SimPub.publish(msg);}
\DoxyCodeLine{84 }
\DoxyCodeLine{86         \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(\textcolor{keywordtype}{string},\textcolor{stringliteral}{"{}stop"{}})==0)\{}
\DoxyCodeLine{87             std\_msgs::Int8 msg;}
\DoxyCodeLine{88             msg.data=0;}
\DoxyCodeLine{89             \textcolor{comment}{//command message publishing}}
\DoxyCodeLine{90             SimPub.publish(msg);}
\DoxyCodeLine{91 }
\DoxyCodeLine{93         \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(\textcolor{keywordtype}{string},\textcolor{stringliteral}{"{}set\_default"{}})==0)\{}
\DoxyCodeLine{94             sensor\_msgs::JointState msg;}
\DoxyCodeLine{95             \textcolor{keywordtype}{double} array[7];}
\DoxyCodeLine{96             printf(\textcolor{stringliteral}{"{}Print the joint position you want to set as default:\(\backslash\)n"{}});}
\DoxyCodeLine{97             msg.position.resize(7);}
\DoxyCodeLine{98             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0;i<7;i++)\{}
\DoxyCodeLine{99                 printf(\textcolor{stringliteral}{"{}joint \%d:"{}},i+1);}
\DoxyCodeLine{100                 scanf(\textcolor{stringliteral}{"{}\%lf"{}},\&msg.position[i]);}
\DoxyCodeLine{101             \}}
\DoxyCodeLine{102             \textcolor{comment}{//command message publishing}}
\DoxyCodeLine{103             SimStatePub.publish(msg);}
\DoxyCodeLine{104 }
\DoxyCodeLine{106         \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(\textcolor{keywordtype}{string},\textcolor{stringliteral}{"{}exit"{}})==0)\{}
\DoxyCodeLine{107             std\_msgs::Int8 msg;}
\DoxyCodeLine{108             msg.data=1;}
\DoxyCodeLine{109             \textcolor{comment}{//command message publishing}}
\DoxyCodeLine{110             ExitPub.publish(msg);}
\DoxyCodeLine{111                 }
\DoxyCodeLine{112             \textcolor{keywordtype}{int} parent=getppid();}
\DoxyCodeLine{113             system(\textcolor{stringliteral}{"{}rosnode kill -\/a"{}});}
\DoxyCodeLine{114             kill(parent,SIGKILL);}
\DoxyCodeLine{115             \textcolor{keywordflow}{break};}
\DoxyCodeLine{116         \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{117             printf(\textcolor{stringliteral}{"{}Error: mistake in command definition, digit 'help' for a command list\(\backslash\)n"{}});}
\DoxyCodeLine{118         \}}
\DoxyCodeLine{119 }
\DoxyCodeLine{120         ros::spinOnce();}
\DoxyCodeLine{121 }
\DoxyCodeLine{122     \textcolor{comment}{//wait for the next cycle}}
\DoxyCodeLine{123         loop\_rate.sleep();}
\DoxyCodeLine{124         }
\DoxyCodeLine{125   \}}
\DoxyCodeLine{126 }
\DoxyCodeLine{127   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{128     }
\DoxyCodeLine{129 \}}

\end{DoxyCode}
