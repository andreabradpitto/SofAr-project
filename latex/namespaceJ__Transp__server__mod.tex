\hypertarget{namespaceJ__Transp__server__mod}{}\doxysection{J\+\_\+\+Transp\+\_\+server\+\_\+mod Namespace Reference}
\label{namespaceJ__Transp__server__mod}\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespaceJ__Transp__server__mod_a931b3fd10c13fc208fda297ebe4ca920}{j\+\_\+transp}} (err, err\+\_\+dot, \mbox{\hyperlink{ik_8cpp_af2f8d0151c18d9e648b6353879e885ad}{J}}, Wp, Wd, delta\+\_\+t, Jp, Ji, alpha, beta, q\+\_\+dot\+\_\+pref, min, max)
\begin{DoxyCompactList}\small\item\em Function that performs Inverse kinematics using the Jacobian Transpose approach, considering also the velocity error and the enhancement for singularity escaping (from \char`\"{}\+Advances in Robot Kinematics\+: Analysis and
\+Control\char`\"{}, J.\+Lenarcic and M. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespaceJ__Transp__server__mod_a473064457df87988ad257c2672f8bdd5}{handle\+\_\+\+I\+K\+\_\+\+Jtransp}} (req)
\item 
def \mbox{\hyperlink{namespaceJ__Transp__server__mod_a4695a542d55c75cdd96c7960e2cb5b05}{error\+\_\+callback}} (message)
\item 
def \mbox{\hyperlink{namespaceJ__Transp__server__mod_aa26a9a6e70f4d3137914dc68e043e0a1}{jacobian\+\_\+callback}} (message)
\item 
def \mbox{\hyperlink{namespaceJ__Transp__server__mod_a7c4eb622a4d2fcb82bb1cd1d2ea95e11}{axes\+\_\+callback}} (message)
\item 
def \mbox{\hyperlink{namespaceJ__Transp__server__mod_add16c6fe81efee7a67d72e333bbc254f}{J\+T\+\_\+server}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{namespaceJ__Transp__server__mod_a31a89a5c0f79065a2a683a6fc61c9729}{ready\+Err}} = False
\item 
bool \mbox{\hyperlink{namespaceJ__Transp__server__mod_abc098965d969d541a1dace8d03f6d013}{readyJ}} = False
\item 
bool \mbox{\hyperlink{namespaceJ__Transp__server__mod_a0d91963cbb06072a37a6cca04eddfb21}{ready\+Jp}} = False
\item 
list \mbox{\hyperlink{namespaceJ__Transp__server__mod_a90f4456360f7bd6a4f6a1004a6dcc4e5}{wp}} = \mbox{[}10, 10, 10, 1, 1, 1\mbox{]}
\item 
list \mbox{\hyperlink{namespaceJ__Transp__server__mod_a98f37c6c32e7f5122082dd27ccb70290}{wd}} = \mbox{[}0,0,0,0,0,0\mbox{]}
\item 
\mbox{\hyperlink{namespaceJ__Transp__server__mod_a28eddf82f6d03c3e2e927afb7a72b367}{q\+\_\+dot\+\_\+elbow}} = np.\+array(\mbox{[}\mbox{[}0, -\/1, 0, 10, 0, -\/0.\+0001, 0\mbox{]}\mbox{]}, dtype=float).T
\item 
int \mbox{\hyperlink{namespaceJ__Transp__server__mod_ab35ca23121947884d06878b25c36e103}{A\+L\+P\+HA}} = 250
\item 
int \mbox{\hyperlink{namespaceJ__Transp__server__mod_a248694b7979ab9890658c0707016858a}{B\+E\+TA}} = 250
\item 
int \mbox{\hyperlink{namespaceJ__Transp__server__mod_aacd94c35bf6a2f1afcd3f87d7d63c65a}{M\+IN}} = -\/1
\item 
int \mbox{\hyperlink{namespaceJ__Transp__server__mod_a2ea6ff93cdda2450463666fd5efc4730}{M\+AX}} = 1
\item 
\mbox{\hyperlink{namespaceJ__Transp__server__mod_aa5ee81c236d6ae6e546aa647e87e73f0}{script\+\_\+dir}} = os.\+path.\+dirname(\+\_\+\+\_\+file\+\_\+\+\_\+)
\item 
string \mbox{\hyperlink{namespaceJ__Transp__server__mod_a01c2cc47e5a874640212cddb8d98b8e9}{rel\+\_\+path}} = \char`\"{}./Output\+\_\+\+Jtranspose.\+txt\char`\"{}
\item 
\mbox{\hyperlink{namespaceJ__Transp__server__mod_a9b51a3a98d7478b1eca987cd98b3e7c0}{abs\+\_\+file\+\_\+path}} = os.\+path.\+join(\mbox{\hyperlink{namespaceJ__Transp__server__mod_aa5ee81c236d6ae6e546aa647e87e73f0}{script\+\_\+dir}}, \mbox{\hyperlink{namespaceJ__Transp__server__mod_a01c2cc47e5a874640212cddb8d98b8e9}{rel\+\_\+path}})
\item 
int \mbox{\hyperlink{namespaceJ__Transp__server__mod_a51278299625f59a15bb76119fdbf5876}{L\+O\+G\+\_\+\+F\+L\+AG}} = 0
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespaceJ__Transp__server__mod_a7c4eb622a4d2fcb82bb1cd1d2ea95e11}\label{namespaceJ__Transp__server__mod_a7c4eb622a4d2fcb82bb1cd1d2ea95e11}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!axes\_callback@{axes\_callback}}
\index{axes\_callback@{axes\_callback}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{axes\_callback()}{axes\_callback()}}
{\footnotesize\ttfamily def J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+axes\+\_\+callback (\begin{DoxyParamCaption}\item[{}]{message }\end{DoxyParamCaption})}



Definition at line 178 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{178 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceJ__Transp__server__mod_a7c4eb622a4d2fcb82bb1cd1d2ea95e11}{axes\_callback}}(message):}
\DoxyCodeLine{179     }
\DoxyCodeLine{180     \textcolor{comment}{\# Declaration to work with global variables}}
\DoxyCodeLine{181     \textcolor{keyword}{global} Jp, Ji, readyJp}
\DoxyCodeLine{182 }
\DoxyCodeLine{183     \textcolor{comment}{\# Inter-\/joints axes and rotation axes used in the correction term}}
\DoxyCodeLine{184     Jp = np.array(message.data[:18]).reshape(6,3)}
\DoxyCodeLine{185     Ji = np.array(message.data[18:]).reshape(3,3)}
\DoxyCodeLine{186 }
\DoxyCodeLine{187     \textcolor{comment}{\# Set the Jp as available}}
\DoxyCodeLine{188     readyJp = \textcolor{keyword}{True}}
\DoxyCodeLine{189 }
\DoxyCodeLine{190 \textcolor{comment}{\# Main body containing 2 Subscribers and the Service defition}}

\end{DoxyCode}
\mbox{\Hypertarget{namespaceJ__Transp__server__mod_a4695a542d55c75cdd96c7960e2cb5b05}\label{namespaceJ__Transp__server__mod_a4695a542d55c75cdd96c7960e2cb5b05}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!error\_callback@{error\_callback}}
\index{error\_callback@{error\_callback}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{error\_callback()}{error\_callback()}}
{\footnotesize\ttfamily def J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+error\+\_\+callback (\begin{DoxyParamCaption}\item[{}]{message }\end{DoxyParamCaption})}



Definition at line 147 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{147 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceJ__Transp__server__mod_a4695a542d55c75cdd96c7960e2cb5b05}{error\_callback}}(message):}
\DoxyCodeLine{148 }
\DoxyCodeLine{149     \textcolor{comment}{\# Declaration to work with global variables}}
\DoxyCodeLine{150     \textcolor{keyword}{global} error,readyErr}
\DoxyCodeLine{151 }
\DoxyCodeLine{152     \textcolor{comment}{\# Re-\/arranging the error (position and velocity) vector in the needed form:}}
\DoxyCodeLine{153     err\_orient = np.array([message.data[:3]]).T}
\DoxyCodeLine{154     err\_pos = np.array([message.data[3:6]]).T}
\DoxyCodeLine{155 }
\DoxyCodeLine{156     err\_vel\_lin = np.array([message.data[6:9]]).T}
\DoxyCodeLine{157     err\_vel\_rot = np.array([[0,0,0]]).T}
\DoxyCodeLine{158 }
\DoxyCodeLine{159     error = np.concatenate((err\_pos, err\_orient, err\_vel\_lin, err\_vel\_rot), axis=0)}
\DoxyCodeLine{160     }
\DoxyCodeLine{161     \textcolor{comment}{\# Set the Error as available}}
\DoxyCodeLine{162     readyErr = \textcolor{keyword}{True}}
\DoxyCodeLine{163 }
\DoxyCodeLine{164 \textcolor{comment}{\# Callback Function for the Jacobian matrix}}

\end{DoxyCode}
\mbox{\Hypertarget{namespaceJ__Transp__server__mod_a473064457df87988ad257c2672f8bdd5}\label{namespaceJ__Transp__server__mod_a473064457df87988ad257c2672f8bdd5}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!handle\_IK\_Jtransp@{handle\_IK\_Jtransp}}
\index{handle\_IK\_Jtransp@{handle\_IK\_Jtransp}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{handle\_IK\_Jtransp()}{handle\_IK\_Jtransp()}}
{\footnotesize\ttfamily def J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+handle\+\_\+\+I\+K\+\_\+\+Jtransp (\begin{DoxyParamCaption}\item[{}]{req }\end{DoxyParamCaption})}



Definition at line 120 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{120 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceJ__Transp__server__mod_a473064457df87988ad257c2672f8bdd5}{handle\_IK\_Jtransp}}(req):}
\DoxyCodeLine{121 }
\DoxyCodeLine{122     \textcolor{comment}{\# Declaration to work with global variables}}
\DoxyCodeLine{123     \textcolor{keyword}{global} readyErr, readyJ, readyJp, Jp, Ji, q\_dot\_elbow, wp, wd}
\DoxyCodeLine{124 }
\DoxyCodeLine{125     \textcolor{keywordflow}{print}\textcolor{stringliteral}{"{}Server J Transpose accepted request.\(\backslash\)n"{}}}
\DoxyCodeLine{126     }
\DoxyCodeLine{127     \textcolor{comment}{\# Case in which the necessary data is not available}}
\DoxyCodeLine{128     \textcolor{keywordflow}{if} (\textcolor{keywordflow}{not} (readyErr \textcolor{keywordflow}{and} readyJ \textcolor{keywordflow}{and} readyJp)):}
\DoxyCodeLine{129         readyErr = readyJ = readyJp = \textcolor{keyword}{False}}
\DoxyCodeLine{130         rospy.logerr(\textcolor{stringliteral}{"{}J Transpose service could not run: missing data."{}})}
\DoxyCodeLine{131         \textcolor{keywordflow}{return} }
\DoxyCodeLine{132     \textcolor{comment}{\# Case in which data is available}}
\DoxyCodeLine{133     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{134         readyErr = readyJ = readyJp = \textcolor{keyword}{False}}
\DoxyCodeLine{135         \textcolor{keywordflow}{if} (LOG\_FLAG):}
\DoxyCodeLine{136             now = rospy.get\_rostime()}
\DoxyCodeLine{137             timestamp =  now.secs + float(now.nsecs)/1000000000}
\DoxyCodeLine{138             \textcolor{keyword}{with} open(abs\_file\_path, \textcolor{stringliteral}{'a'}) \textcolor{keyword}{as} f:}
\DoxyCodeLine{139                 f.write(str(timestamp))}
\DoxyCodeLine{140                 f.write(\textcolor{stringliteral}{"{}\(\backslash\)t"{}})}
\DoxyCodeLine{141                 f.write(str(\mbox{\hyperlink{namespaceJ__Transp__server__mod_a931b3fd10c13fc208fda297ebe4ca920}{j\_transp}}(error[:6], error[6:], J, wp, wd, 0.01, Jp, Ji, ALPHA, BETA, q\_dot\_elbow, MIN, MAX).velocity.T))}
\DoxyCodeLine{142                 f.write(\textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)n"{}})}
\DoxyCodeLine{143 }
\DoxyCodeLine{144         \textcolor{keywordflow}{return} IK\_JtraResponse(\mbox{\hyperlink{namespaceJ__Transp__server__mod_a931b3fd10c13fc208fda297ebe4ca920}{j\_transp}}(error[:6], error[6:], J, wp, wd, 0.01, Jp, Ji, ALPHA, BETA, q\_dot\_elbow,MIN, MAX))        }
\DoxyCodeLine{145 }
\DoxyCodeLine{146 \textcolor{comment}{\# Callback Function for the error on the position (error on Xee)}}

\end{DoxyCode}
\mbox{\Hypertarget{namespaceJ__Transp__server__mod_a931b3fd10c13fc208fda297ebe4ca920}\label{namespaceJ__Transp__server__mod_a931b3fd10c13fc208fda297ebe4ca920}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!j\_transp@{j\_transp}}
\index{j\_transp@{j\_transp}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{j\_transp()}{j\_transp()}}
{\footnotesize\ttfamily def J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+j\+\_\+transp (\begin{DoxyParamCaption}\item[{}]{err,  }\item[{}]{err\+\_\+dot,  }\item[{}]{J,  }\item[{}]{Wp,  }\item[{}]{Wd,  }\item[{}]{delta\+\_\+t,  }\item[{}]{Jp,  }\item[{}]{Ji,  }\item[{}]{alpha,  }\item[{}]{beta,  }\item[{}]{q\+\_\+dot\+\_\+pref,  }\item[{}]{min,  }\item[{}]{max }\end{DoxyParamCaption})}



Function that performs Inverse kinematics using the Jacobian Transpose approach, considering also the velocity error and the enhancement for singularity escaping (from \char`\"{}\+Advances in Robot Kinematics\+: Analysis and
\+Control\char`\"{}, J.\+Lenarcic and M. 

L. Husty). 
\begin{DoxyParams}{Parameters}
{\em err} & the Error on the position and orientation of the end effector. \\
\hline
{\em J} & the Jacobian matrix of the manipulator. \\
\hline
{\em delta\+\_\+t} & sampling time. \\
\hline
{\em Wp} & weights for the error on the position and orientation. \\
\hline
{\em Wd} & weights for the error on the velocity. \\
\hline
{\em Jp} & matrix with inter-\/joints axes (by rows) used in the enhancement. \\
\hline
{\em Ji} & matrix with rotation axes (by rows) used in the enhancement. \\
\hline
{\em alpha} & tuning parameter (scalar) used in the enhancement. \\
\hline
{\em beta} & tuning parameter (scalar) used in the enhancement. \\
\hline
{\em q\+\_\+dot\+\_\+pref} & joint velocities to escape from singularity. \\
\hline
{\em min} & minimum value for the output saturation. \\
\hline
{\em max} & maximum value for the output saturation. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\+: a Float64\+Multi\+Array containing the Joint Velocities. 
\end{DoxyReturn}


Definition at line 51 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{51 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceJ__Transp__server__mod_a931b3fd10c13fc208fda297ebe4ca920}{j\_transp}}(err, err\_dot, J, Wp, Wd, delta\_t, Jp, Ji, alpha, beta, q\_dot\_pref, min, max):}
\DoxyCodeLine{52     \textcolor{stringliteral}{"{}"{}"{}! }}
\DoxyCodeLine{53 \textcolor{stringliteral}{    Function that performs Inverse kinematics using the Jacobian Transpose}}
\DoxyCodeLine{54 \textcolor{stringliteral}{    approach, considering also the velocity error and the enhancement for }}
\DoxyCodeLine{55 \textcolor{stringliteral}{    singularity escaping (from "{}Advances in Robot Kinematics: Analysis and}}
\DoxyCodeLine{56 \textcolor{stringliteral}{    Control"{}, J.Lenarcic and M. L. Husty).}}
\DoxyCodeLine{57 \textcolor{stringliteral}{    @param err: the Error on the position and orientation of the end effector.}}
\DoxyCodeLine{58 \textcolor{stringliteral}{    @param J: the Jacobian matrix of the manipulator.}}
\DoxyCodeLine{59 \textcolor{stringliteral}{    @param delta\_t: sampling time.}}
\DoxyCodeLine{60 \textcolor{stringliteral}{    @param Wp: weights for the error on the position and orientation. }}
\DoxyCodeLine{61 \textcolor{stringliteral}{    @param Wd: weights for the error on the velocity.}}
\DoxyCodeLine{62 \textcolor{stringliteral}{    @param Jp: matrix with inter-\/joints axes (by rows) used in the enhancement.}}
\DoxyCodeLine{63 \textcolor{stringliteral}{    @param Ji: matrix with rotation axes (by rows) used in the enhancement.}}
\DoxyCodeLine{64 \textcolor{stringliteral}{    @param alpha: tuning parameter (scalar) used in the enhancement.}}
\DoxyCodeLine{65 \textcolor{stringliteral}{    @param beta: tuning parameter (scalar) used in the enhancement.}}
\DoxyCodeLine{66 \textcolor{stringliteral}{    @param q\_dot\_pref: joint velocities to escape from singularity.}}
\DoxyCodeLine{67 \textcolor{stringliteral}{    @param min: minimum value for the output saturation.}}
\DoxyCodeLine{68 \textcolor{stringliteral}{    @param max: maximum value for the output saturation.}}
\DoxyCodeLine{69 \textcolor{stringliteral}{    @return: a Float64MultiArray containing the Joint Velocities.}}
\DoxyCodeLine{70 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{71     \textcolor{comment}{\# Norm of the position error}}
\DoxyCodeLine{72     err\_norm = np.linalg.norm(err)}
\DoxyCodeLine{73 }
\DoxyCodeLine{74     \textcolor{comment}{\# Norm of the linear part of the position error}}
\DoxyCodeLine{75     err\_norm\_lin = np.linalg.norm(err[:3])}
\DoxyCodeLine{76 }
\DoxyCodeLine{77     \textcolor{comment}{\# Norm of the rotational part of the position error}}
\DoxyCodeLine{78     err\_norm\_rot = np.linalg.norm(err[3:])}
\DoxyCodeLine{79 }
\DoxyCodeLine{80     \textcolor{comment}{\# Norm of the derivative of the position error}}
\DoxyCodeLine{81     err\_dot\_norm = np.linalg.norm(err\_dot)}
\DoxyCodeLine{82 }
\DoxyCodeLine{83     \textcolor{comment}{\# Norm of the linear part of the derivative of the position error}}
\DoxyCodeLine{84     err\_dot\_lin = np.linalg.norm(err\_dot[:3])}
\DoxyCodeLine{85    }
\DoxyCodeLine{86     \textcolor{comment}{\# Norm of the rotational part of the derivative of the position error}}
\DoxyCodeLine{87     err\_dot\_rot = np.linalg.norm(err\_dot[3:])}
\DoxyCodeLine{88 }
\DoxyCodeLine{89     \textcolor{comment}{\# q\_dot initialization}}
\DoxyCodeLine{90     q\_dot = JointState()}
\DoxyCodeLine{91 }
\DoxyCodeLine{92     \textcolor{comment}{\# Working Case}}
\DoxyCodeLine{93     \textcolor{keywordflow}{if} ((err\_norm>0.0001) \textcolor{keywordflow}{or} (err\_dot\_norm>0.001)):}
\DoxyCodeLine{94 }
\DoxyCodeLine{95         \textcolor{comment}{\# Weights as diagonal Matrices:}}
\DoxyCodeLine{96         Kp = np.diag([err\_norm\_lin*Wp[0], err\_norm\_lin*Wp[1], err\_norm\_lin*Wp[2], err\_norm\_rot*Wp[3], err\_norm\_rot*Wp[4], err\_norm\_rot*Wp[5]])}
\DoxyCodeLine{97 }
\DoxyCodeLine{98         Kd = np.diag([err\_dot\_lin*Wd[0], err\_dot\_lin*Wd[1], err\_dot\_lin*Wd[2], err\_dot\_rot*Wd[3], err\_dot\_rot*Wd[4], err\_dot\_rot*Wd[5]])}
\DoxyCodeLine{99 }
\DoxyCodeLine{100         \textcolor{comment}{\# Delta Joint positions using: J\_transpose*K*error\_transpose + correction term (Paper Formula)}}
\DoxyCodeLine{101         dq = J.T.dot(Kp.dot(err)+Kd.dot(err\_dot))+\mbox{\hyperlink{namespaceJT__enhance}{JT\_enhance}}(Jp, Ji, err[:3], alpha, beta, q\_dot\_pref)}
\DoxyCodeLine{102 }
\DoxyCodeLine{103         \textcolor{comment}{\# Joint velocities, being dq = q\_dot*delta\_t}}
\DoxyCodeLine{104         q\_dot.velocity = dq/delta\_t}
\DoxyCodeLine{105         }
\DoxyCodeLine{106         \textcolor{comment}{\# Saturation of the output within the desired interval (min,max)}}
\DoxyCodeLine{107         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(q\_dot.velocity)):}
\DoxyCodeLine{108             q\_dot.velocity[i] = \mbox{\hyperlink{namespaceintegrator_a22979cdd714ad2c612b7ced573d9f3b2}{sat}}(q\_dot.velocity[i],min,max)}
\DoxyCodeLine{109         }
\DoxyCodeLine{110     \textcolor{comment}{\# Position Reached (within the indicated precision)}}
\DoxyCodeLine{111     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{112 }
\DoxyCodeLine{113         \textcolor{comment}{\# Stop the Joints: zero velocities}}
\DoxyCodeLine{114         q\_dot.velocity = np.zeros((max(J.shape))).T}
\DoxyCodeLine{115 }
\DoxyCodeLine{116     \textcolor{keywordflow}{return} q\_dot}
\DoxyCodeLine{117     }
\DoxyCodeLine{118 }
\DoxyCodeLine{119 \textcolor{comment}{\# Handler for the Server}}

\end{DoxyCode}
\mbox{\Hypertarget{namespaceJ__Transp__server__mod_aa26a9a6e70f4d3137914dc68e043e0a1}\label{namespaceJ__Transp__server__mod_aa26a9a6e70f4d3137914dc68e043e0a1}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!jacobian\_callback@{jacobian\_callback}}
\index{jacobian\_callback@{jacobian\_callback}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{jacobian\_callback()}{jacobian\_callback()}}
{\footnotesize\ttfamily def J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+jacobian\+\_\+callback (\begin{DoxyParamCaption}\item[{}]{message }\end{DoxyParamCaption})}



Definition at line 165 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{165 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceJ__Transp__server__mod_aa26a9a6e70f4d3137914dc68e043e0a1}{jacobian\_callback}}(message):}
\DoxyCodeLine{166     }
\DoxyCodeLine{167     \textcolor{comment}{\# Declaration to work with global variables}}
\DoxyCodeLine{168     \textcolor{keyword}{global} J, readyJ}
\DoxyCodeLine{169     }
\DoxyCodeLine{170     \textcolor{comment}{\# Baxter Jacobian Matrix }}
\DoxyCodeLine{171     J = np.array(message.data)}
\DoxyCodeLine{172     J = J.reshape(6,7)}
\DoxyCodeLine{173 }
\DoxyCodeLine{174     \textcolor{comment}{\# Set the J as available}}
\DoxyCodeLine{175     readyJ = \textcolor{keyword}{True}}
\DoxyCodeLine{176 }
\DoxyCodeLine{177 \textcolor{comment}{\# Callback Function for the Axes required for the Correction Term}}

\end{DoxyCode}
\mbox{\Hypertarget{namespaceJ__Transp__server__mod_add16c6fe81efee7a67d72e333bbc254f}\label{namespaceJ__Transp__server__mod_add16c6fe81efee7a67d72e333bbc254f}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!JT\_server@{JT\_server}}
\index{JT\_server@{JT\_server}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{JT\_server()}{JT\_server()}}
{\footnotesize\ttfamily def J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+J\+T\+\_\+server (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 191 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{191 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceJ__Transp__server__mod_add16c6fe81efee7a67d72e333bbc254f}{JT\_server}}():}
\DoxyCodeLine{192 }
\DoxyCodeLine{193     \textcolor{comment}{\# Node Initialization}}
\DoxyCodeLine{194     rospy.init\_node(\textcolor{stringliteral}{'IK\_Jtransp\_server'})}
\DoxyCodeLine{195 }
\DoxyCodeLine{196     rospy.loginfo(\textcolor{stringliteral}{"{}Server Initialized.\(\backslash\)n"{}})}
\DoxyCodeLine{197 }
\DoxyCodeLine{198     \textcolor{comment}{\# Subscribers}}
\DoxyCodeLine{199     rospy.Subscriber(\textcolor{stringliteral}{"{}errors"{}}, Float64MultiArray, error\_callback)}
\DoxyCodeLine{200     rospy.Subscriber(\textcolor{stringliteral}{"{}jacobian"{}}, Float64MultiArray, jacobian\_callback)}
\DoxyCodeLine{201     rospy.Subscriber(\textcolor{stringliteral}{"{}axes"{}}, Float64MultiArray, axes\_callback)}
\DoxyCodeLine{202 }
\DoxyCodeLine{203     s = rospy.Service(\textcolor{stringliteral}{'IK\_Jtransp'}, IK\_Jtra, handle\_IK\_Jtransp)}
\DoxyCodeLine{204     rospy.spin()}
\DoxyCodeLine{205     }

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{namespaceJ__Transp__server__mod_a9b51a3a98d7478b1eca987cd98b3e7c0}\label{namespaceJ__Transp__server__mod_a9b51a3a98d7478b1eca987cd98b3e7c0}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!abs\_file\_path@{abs\_file\_path}}
\index{abs\_file\_path@{abs\_file\_path}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{abs\_file\_path}{abs\_file\_path}}
{\footnotesize\ttfamily J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+abs\+\_\+file\+\_\+path = os.\+path.\+join(\mbox{\hyperlink{namespaceJ__Transp__server__mod_aa5ee81c236d6ae6e546aa647e87e73f0}{script\+\_\+dir}}, \mbox{\hyperlink{namespaceJ__Transp__server__mod_a01c2cc47e5a874640212cddb8d98b8e9}{rel\+\_\+path}})}



Definition at line 46 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.

\mbox{\Hypertarget{namespaceJ__Transp__server__mod_ab35ca23121947884d06878b25c36e103}\label{namespaceJ__Transp__server__mod_ab35ca23121947884d06878b25c36e103}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!ALPHA@{ALPHA}}
\index{ALPHA@{ALPHA}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{ALPHA}{ALPHA}}
{\footnotesize\ttfamily int J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+A\+L\+P\+HA = 250}



Definition at line 35 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.

\mbox{\Hypertarget{namespaceJ__Transp__server__mod_a248694b7979ab9890658c0707016858a}\label{namespaceJ__Transp__server__mod_a248694b7979ab9890658c0707016858a}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!BETA@{BETA}}
\index{BETA@{BETA}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{BETA}{BETA}}
{\footnotesize\ttfamily int J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+B\+E\+TA = 250}



Definition at line 36 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.

\mbox{\Hypertarget{namespaceJ__Transp__server__mod_a51278299625f59a15bb76119fdbf5876}\label{namespaceJ__Transp__server__mod_a51278299625f59a15bb76119fdbf5876}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!LOG\_FLAG@{LOG\_FLAG}}
\index{LOG\_FLAG@{LOG\_FLAG}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{LOG\_FLAG}{LOG\_FLAG}}
{\footnotesize\ttfamily int J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+L\+O\+G\+\_\+\+F\+L\+AG = 0}



Definition at line 49 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.

\mbox{\Hypertarget{namespaceJ__Transp__server__mod_a2ea6ff93cdda2450463666fd5efc4730}\label{namespaceJ__Transp__server__mod_a2ea6ff93cdda2450463666fd5efc4730}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!MAX@{MAX}}
\index{MAX@{MAX}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{MAX}{MAX}}
{\footnotesize\ttfamily int J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+M\+AX = 1}



Definition at line 40 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.

\mbox{\Hypertarget{namespaceJ__Transp__server__mod_aacd94c35bf6a2f1afcd3f87d7d63c65a}\label{namespaceJ__Transp__server__mod_aacd94c35bf6a2f1afcd3f87d7d63c65a}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!MIN@{MIN}}
\index{MIN@{MIN}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{MIN}{MIN}}
{\footnotesize\ttfamily int J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+M\+IN = -\/1}



Definition at line 39 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.

\mbox{\Hypertarget{namespaceJ__Transp__server__mod_a28eddf82f6d03c3e2e927afb7a72b367}\label{namespaceJ__Transp__server__mod_a28eddf82f6d03c3e2e927afb7a72b367}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!q\_dot\_elbow@{q\_dot\_elbow}}
\index{q\_dot\_elbow@{q\_dot\_elbow}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{q\_dot\_elbow}{q\_dot\_elbow}}
{\footnotesize\ttfamily J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+q\+\_\+dot\+\_\+elbow = np.\+array(\mbox{[}\mbox{[}0, -\/1, 0, 10, 0, -\/0.\+0001, 0\mbox{]}\mbox{]}, dtype=float).T}



Definition at line 32 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.

\mbox{\Hypertarget{namespaceJ__Transp__server__mod_a31a89a5c0f79065a2a683a6fc61c9729}\label{namespaceJ__Transp__server__mod_a31a89a5c0f79065a2a683a6fc61c9729}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!readyErr@{readyErr}}
\index{readyErr@{readyErr}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{readyErr}{readyErr}}
{\footnotesize\ttfamily bool J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+ready\+Err = False}



Definition at line 23 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.

\mbox{\Hypertarget{namespaceJ__Transp__server__mod_abc098965d969d541a1dace8d03f6d013}\label{namespaceJ__Transp__server__mod_abc098965d969d541a1dace8d03f6d013}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!readyJ@{readyJ}}
\index{readyJ@{readyJ}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{readyJ}{readyJ}}
{\footnotesize\ttfamily bool J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+readyJ = False}



Definition at line 24 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.

\mbox{\Hypertarget{namespaceJ__Transp__server__mod_a0d91963cbb06072a37a6cca04eddfb21}\label{namespaceJ__Transp__server__mod_a0d91963cbb06072a37a6cca04eddfb21}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!readyJp@{readyJp}}
\index{readyJp@{readyJp}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{readyJp}{readyJp}}
{\footnotesize\ttfamily bool J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+ready\+Jp = False}



Definition at line 25 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.

\mbox{\Hypertarget{namespaceJ__Transp__server__mod_a01c2cc47e5a874640212cddb8d98b8e9}\label{namespaceJ__Transp__server__mod_a01c2cc47e5a874640212cddb8d98b8e9}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!rel\_path@{rel\_path}}
\index{rel\_path@{rel\_path}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{rel\_path}{rel\_path}}
{\footnotesize\ttfamily string J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+rel\+\_\+path = \char`\"{}./Output\+\_\+\+Jtranspose.\+txt\char`\"{}}



Definition at line 45 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.

\mbox{\Hypertarget{namespaceJ__Transp__server__mod_aa5ee81c236d6ae6e546aa647e87e73f0}\label{namespaceJ__Transp__server__mod_aa5ee81c236d6ae6e546aa647e87e73f0}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!script\_dir@{script\_dir}}
\index{script\_dir@{script\_dir}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{script\_dir}{script\_dir}}
{\footnotesize\ttfamily J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+script\+\_\+dir = os.\+path.\+dirname(\+\_\+\+\_\+file\+\_\+\+\_\+)}



Definition at line 44 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.

\mbox{\Hypertarget{namespaceJ__Transp__server__mod_a98f37c6c32e7f5122082dd27ccb70290}\label{namespaceJ__Transp__server__mod_a98f37c6c32e7f5122082dd27ccb70290}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!wd@{wd}}
\index{wd@{wd}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{wd}{wd}}
{\footnotesize\ttfamily list J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+wd = \mbox{[}0,0,0,0,0,0\mbox{]}}



Definition at line 29 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.

\mbox{\Hypertarget{namespaceJ__Transp__server__mod_a90f4456360f7bd6a4f6a1004a6dcc4e5}\label{namespaceJ__Transp__server__mod_a90f4456360f7bd6a4f6a1004a6dcc4e5}} 
\index{J\_Transp\_server\_mod@{J\_Transp\_server\_mod}!wp@{wp}}
\index{wp@{wp}!J\_Transp\_server\_mod@{J\_Transp\_server\_mod}}
\doxysubsubsection{\texorpdfstring{wp}{wp}}
{\footnotesize\ttfamily list J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+wp = \mbox{[}10, 10, 10, 1, 1, 1\mbox{]}}



Definition at line 28 of file J\+\_\+\+Transp\+\_\+server\+\_\+mod.\+py.

