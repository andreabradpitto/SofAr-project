\hypertarget{namespacecalibration2}{}\doxysection{calibration2 Namespace Reference}
\label{namespacecalibration2}\index{calibration2@{calibration2}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespacecalibration2_adc99e1f9eefd926e91cd9e785005df94}{imu\+\_\+ee\+\_\+calibration}} (data)
\begin{DoxyCompactList}\small\item\em Computes the orientation between 0 and global frame using an initial configuration. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacecalibration2_a135759f4bfd57e278f8b9c254fea9993}{simulate\+\_\+callback}} (data)
\begin{DoxyCompactList}\small\item\em Waits for the start from handle simulation topic. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacecalibration2_ab20361e80faad56a05972dd525b91628}{calibrate\+\_\+orientation}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacecalibration2_a7e7cbe182e92c26a1506676e38eb169e}{pub\+\_\+rot\+\_\+matrices}}
\item 
\mbox{\hyperlink{namespacecalibration2_a1d4aeda07821ccf8a281a1769b94c616}{R0e}}
\item 
int \mbox{\hyperlink{namespacecalibration2_a055c86e4979dabb9ffe2e8c5f714b720}{start}} = 0
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}@package pyexample
\end{DoxyVerb}
 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacecalibration2_ab20361e80faad56a05972dd525b91628}\label{namespacecalibration2_ab20361e80faad56a05972dd525b91628}} 
\index{calibration2@{calibration2}!calibrate\_orientation@{calibrate\_orientation}}
\index{calibrate\_orientation@{calibrate\_orientation}!calibration2@{calibration2}}
\doxysubsubsection{\texorpdfstring{calibrate\_orientation()}{calibrate\_orientation()}}
{\footnotesize\ttfamily def calibration2.\+calibrate\+\_\+orientation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 73 of file calibration2.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{73 \textcolor{keyword}{def }\mbox{\hyperlink{namespacecalibration2_ab20361e80faad56a05972dd525b91628}{calibrate\_orientation}}():}
\DoxyCodeLine{74 }
\DoxyCodeLine{75     \textcolor{comment}{\# In ROS, nodes are uniquely named. If two nodes with the same}}
\DoxyCodeLine{76     \textcolor{comment}{\# name are launched, the previous one is kicked off. The}}
\DoxyCodeLine{77     \textcolor{comment}{\# anonymous=True flag means that rospy will choose a unique}}
\DoxyCodeLine{78     \textcolor{comment}{\# name for our 'listener' node so that multiple listeners can}}
\DoxyCodeLine{79     \textcolor{comment}{\# run simultaneously.}}
\DoxyCodeLine{80     rospy.init\_node(\textcolor{stringliteral}{'calibrate\_orientation'}, anonymous=\textcolor{keyword}{True})}
\DoxyCodeLine{81 }
\DoxyCodeLine{82     rospy.Subscriber(\textcolor{stringliteral}{"{}smartphone"{}}, Imu, imu\_ee\_calibration)}
\DoxyCodeLine{83     rospy.Subscriber(\textcolor{stringliteral}{"{}handleSimulation"{}}, Int8, simulate\_callback)}
\DoxyCodeLine{84 }
\DoxyCodeLine{85     rospy.spin()}
\DoxyCodeLine{86 }
\DoxyCodeLine{87 }

\end{DoxyCode}
\mbox{\Hypertarget{namespacecalibration2_adc99e1f9eefd926e91cd9e785005df94}\label{namespacecalibration2_adc99e1f9eefd926e91cd9e785005df94}} 
\index{calibration2@{calibration2}!imu\_ee\_calibration@{imu\_ee\_calibration}}
\index{imu\_ee\_calibration@{imu\_ee\_calibration}!calibration2@{calibration2}}
\doxysubsubsection{\texorpdfstring{imu\_ee\_calibration()}{imu\_ee\_calibration()}}
{\footnotesize\ttfamily def calibration2.\+imu\+\_\+ee\+\_\+calibration (\begin{DoxyParamCaption}\item[{}]{data }\end{DoxyParamCaption})}



Computes the orientation between 0 and global frame using an initial configuration. 


\begin{DoxyParams}{Parameters}
{\em data} & inertial data coming from smartphone. The focus is on the orientation info given by a quaternion. \\
\hline
\end{DoxyParams}


Definition at line 29 of file calibration2.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{29 \textcolor{keyword}{def }\mbox{\hyperlink{namespacecalibration2_adc99e1f9eefd926e91cd9e785005df94}{imu\_ee\_calibration}}(data):}
\DoxyCodeLine{30     \textcolor{stringliteral}{"{}"{}"{}!}}
\DoxyCodeLine{31 \textcolor{stringliteral}{    Computes the orientation between 0 and global frame using an}}
\DoxyCodeLine{32 \textcolor{stringliteral}{    initial configuration.}}
\DoxyCodeLine{33 \textcolor{stringliteral}{    @param data: inertial data coming from smartphone. The focus is on the}}
\DoxyCodeLine{34 \textcolor{stringliteral}{    orientation info given by a quaternion.}}
\DoxyCodeLine{35 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{36 }
\DoxyCodeLine{37     \textcolor{keyword}{global} start}
\DoxyCodeLine{38 }
\DoxyCodeLine{39     \textcolor{keywordflow}{if} start == 1:}
\DoxyCodeLine{40 }
\DoxyCodeLine{41         orient = [data.orientation.x, data.orientation.y,}
\DoxyCodeLine{42                   data.orientation.z, data.orientation.w]}
\DoxyCodeLine{43 }
\DoxyCodeLine{44         Ttemp = tf.transformations.quaternion\_matrix(}
\DoxyCodeLine{45             (orient[0], orient[1], orient[2], orient[3]))}
\DoxyCodeLine{46         Rimu\_global = Ttemp[:3, :3]}
\DoxyCodeLine{47 }
\DoxyCodeLine{48         R0\_global = np.dot(R0e, Rimu\_global)}
\DoxyCodeLine{49 }
\DoxyCodeLine{50         R = util.init\_float64\_multiarray(9, 1)}
\DoxyCodeLine{51         R0\_global = R0\_global.reshape(9, 1)}
\DoxyCodeLine{52         R.data = R0\_global}
\DoxyCodeLine{53 }
\DoxyCodeLine{54         start = 0}
\DoxyCodeLine{55 }
\DoxyCodeLine{56         rospy.logerr(\textcolor{stringliteral}{"{}Setup done!"{}})}
\DoxyCodeLine{57 }
\DoxyCodeLine{58         pub\_rot\_matrices.publish(R)}
\DoxyCodeLine{59 }
\DoxyCodeLine{60 }

\end{DoxyCode}
\mbox{\Hypertarget{namespacecalibration2_a135759f4bfd57e278f8b9c254fea9993}\label{namespacecalibration2_a135759f4bfd57e278f8b9c254fea9993}} 
\index{calibration2@{calibration2}!simulate\_callback@{simulate\_callback}}
\index{simulate\_callback@{simulate\_callback}!calibration2@{calibration2}}
\doxysubsubsection{\texorpdfstring{simulate\_callback()}{simulate\_callback()}}
{\footnotesize\ttfamily def calibration2.\+simulate\+\_\+callback (\begin{DoxyParamCaption}\item[{}]{data }\end{DoxyParamCaption})}



Waits for the start from handle simulation topic. 


\begin{DoxyParams}{Parameters}
{\em data} & integer used to understand which part of the simulation is on. \\
\hline
\end{DoxyParams}


Definition at line 61 of file calibration2.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{61 \textcolor{keyword}{def }\mbox{\hyperlink{namespacecalibration2_a135759f4bfd57e278f8b9c254fea9993}{simulate\_callback}}(data):}
\DoxyCodeLine{62     \textcolor{stringliteral}{"{}"{}"{}!}}
\DoxyCodeLine{63 \textcolor{stringliteral}{    Waits for the start from handle simulation topic.}}
\DoxyCodeLine{64 \textcolor{stringliteral}{    @param data: integer used to understand which part of the simulation is on.}}
\DoxyCodeLine{65 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{66 }
\DoxyCodeLine{67     \textcolor{keyword}{global} start}
\DoxyCodeLine{68 }
\DoxyCodeLine{69     \textcolor{keywordflow}{if} data.data == 3:}
\DoxyCodeLine{70         start = 1}
\DoxyCodeLine{71 }
\DoxyCodeLine{72 }

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{namespacecalibration2_a7e7cbe182e92c26a1506676e38eb169e}\label{namespacecalibration2_a7e7cbe182e92c26a1506676e38eb169e}} 
\index{calibration2@{calibration2}!pub\_rot\_matrices@{pub\_rot\_matrices}}
\index{pub\_rot\_matrices@{pub\_rot\_matrices}!calibration2@{calibration2}}
\doxysubsubsection{\texorpdfstring{pub\_rot\_matrices}{pub\_rot\_matrices}}
{\footnotesize\ttfamily calibration2.\+pub\+\_\+rot\+\_\+matrices}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 =  rospy.Publisher(}
\DoxyCodeLine{2     \textcolor{stringliteral}{'rot\_matrices'}, Float64MultiArray, queue\_size=10)}

\end{DoxyCode}


Definition at line 14 of file calibration2.\+py.

\mbox{\Hypertarget{namespacecalibration2_a1d4aeda07821ccf8a281a1769b94c616}\label{namespacecalibration2_a1d4aeda07821ccf8a281a1769b94c616}} 
\index{calibration2@{calibration2}!R0e@{R0e}}
\index{R0e@{R0e}!calibration2@{calibration2}}
\doxysubsubsection{\texorpdfstring{R0e}{R0e}}
{\footnotesize\ttfamily calibration2.\+R0e}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 =  np.array([[0,  0,  1],}
\DoxyCodeLine{2                 [0,  1,  0],}
\DoxyCodeLine{3                 [-\/1,  0,  0]])}

\end{DoxyCode}


Definition at line 21 of file calibration2.\+py.

\mbox{\Hypertarget{namespacecalibration2_a055c86e4979dabb9ffe2e8c5f714b720}\label{namespacecalibration2_a055c86e4979dabb9ffe2e8c5f714b720}} 
\index{calibration2@{calibration2}!start@{start}}
\index{start@{start}!calibration2@{calibration2}}
\doxysubsubsection{\texorpdfstring{start}{start}}
{\footnotesize\ttfamily int calibration2.\+start = 0}



Definition at line 26 of file calibration2.\+py.

