\hypertarget{ik_8cpp}{}\doxysection{Math/math\+\_\+pkg/src/ik.cpp File Reference}
\label{ik_8cpp}\index{Math/math\_pkg/src/ik.cpp@{Math/math\_pkg/src/ik.cpp}}
{\ttfamily \#include $<$algorithm$>$}\newline
{\ttfamily \#include $<$fstream$>$}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include \char`\"{}math\+\_\+pkg/\+I\+K.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}math\+\_\+pkg/\+Safety.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ros/ros.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}sensor\+\_\+msgs/\+Joint\+State.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}std\+\_\+msgs/\+Float64\+Multi\+Array.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}utilities.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{ik_8cpp_a553bd3e9c9988b9d431bf9e0420abcf5}{Kpp}}~10
\item 
\#define \mbox{\hyperlink{ik_8cpp_a75bcee4b28157d51fa12c57a1a5d321a}{Kp}}~100
\item 
\#define \mbox{\hyperlink{ik_8cpp_a2fe2438f5734a46e720a5640bbb51e51}{Kv}}~20
\item 
\#define \mbox{\hyperlink{ik_8cpp_aed79ea7ebd60702427ead2f5e5bf2e33}{Krot}}~10
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{ik_8cpp_a6e3db3fb5d09f9eae91c8d2b511498d1}{ik\+CallbackJ}} (const std\+\_\+msgs\+::\+Float64\+Multi\+Array \&msg)
\item 
void \mbox{\hyperlink{ik_8cpp_a1397a016ca869e0fb6ead4b7b52f3f13}{ik\+Callback\+Err}} (const std\+\_\+msgs\+::\+Float64\+Multi\+Array \&msg)
\item 
void \mbox{\hyperlink{ik_8cpp_a2a38e2034f596fd71dc9dd5940c14994}{ik\+Callback\+Vwa}} (const std\+\_\+msgs\+::\+Float64\+Multi\+Array \&msg)
\item 
void \mbox{\hyperlink{ik_8cpp_af6b566518a248f56891967bfecfbadec}{ik\+Callbackqdot}} (const sensor\+\_\+msgs\+::\+Joint\+State \&msg)
\item 
void \mbox{\hyperlink{ik_8cpp_acafa8cf25b8c003a979ecedf2ee99c96}{computeqdot}} (Vector\+Xd partialqdot, Matrix\+Xd Q1, Matrix\+Xd \mbox{\hyperlink{ik_8cpp_af2f8d0151c18d9e648b6353879e885ad}{J}}, Matrix\+Xd \mbox{\hyperlink{ik_8cpp_a7758ed623a0641a8b7e3af2757ee995d}{JL}}, Matrix\+Xd \mbox{\hyperlink{ik_8cpp_a8612eee4d704ec14a5ca709c3420cc32}{J\+Ldot}}, Vector\+Xd \mbox{\hyperlink{safety_8cpp_a317c43362faf4475dce4577384fa9578}{qdot}}, Vector\+Xd \mbox{\hyperlink{ik_8cpp_a256d9bdd4efdff0fe88509ce8f4cfad1}{eta}}, Vector\+Xd \mbox{\hyperlink{ik_8cpp_aa29e2357b44fae23c369d605bdf60fd8}{rho}}, Vector\+Xd etadot, Vector\+Xd \mbox{\hyperlink{ik_8cpp_a6a84fd0a294af9b7ef769d241dfbdf96}{v}}, Vector\+Xd \mbox{\hyperlink{ik_8cpp_a5bfb1324e92ea279c5738b60b67418b1}{w}}, Vector\+Xd \mbox{\hyperlink{ik_8cpp_a421689437204a5d93bb79c17f06c27b5}{a}}, Vector\+Xd \&qdot1, Vector\+Xd \&qdot2)
\item 
bool \mbox{\hyperlink{ik_8cpp_a1846e5628d757e6a4677ee16a0e252ee}{compute\+I\+Kqdot}} (math\+\_\+pkg\+::\+I\+K\+::\+Request \&req, math\+\_\+pkg\+::\+I\+K\+::\+Response \&res)
\item 
int \mbox{\hyperlink{ik_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{ik_8cpp_a2d738c8295c5f93e95c3285c32f9cbf2}{first\+Step}} = true
\item 
bool \mbox{\hyperlink{ik_8cpp_a6f7516c9986aa294222c95551c197aed}{readyJ}}
\item 
bool \mbox{\hyperlink{ik_8cpp_a7c41d2b61d03bb16bf9def8d3f024b81}{ready\+Err}}
\item 
bool \mbox{\hyperlink{ik_8cpp_afdc2b8cff05834f1a3733c9186e98ca3}{ready\+Vwa}}
\item 
bool \mbox{\hyperlink{ik_8cpp_a264031af035928b59314f611ace3c38d}{readyqdot}}
\item 
Matrix\+Xd \mbox{\hyperlink{ik_8cpp_af2f8d0151c18d9e648b6353879e885ad}{J}}
\item 
Matrix\+Xd \mbox{\hyperlink{ik_8cpp_a7758ed623a0641a8b7e3af2757ee995d}{JL}}
\item 
Matrix\+Xd \mbox{\hyperlink{ik_8cpp_a8612eee4d704ec14a5ca709c3420cc32}{J\+Ldot}}
\item 
Matrix\+Xd \mbox{\hyperlink{ik_8cpp_a9537bb8ee75512fd2472edec284939e5}{J\+Lold}}
\item 
Vector\+Xd \mbox{\hyperlink{ik_8cpp_a256d9bdd4efdff0fe88509ce8f4cfad1}{eta}}
\item 
Vector\+Xd \mbox{\hyperlink{ik_8cpp_aa29e2357b44fae23c369d605bdf60fd8}{rho}}
\item 
Vector\+Xd \mbox{\hyperlink{ik_8cpp_ac33b218b57ffc035f4308de318222cf5}{nu}}
\item 
Vector\+Xd \mbox{\hyperlink{ik_8cpp_a6a84fd0a294af9b7ef769d241dfbdf96}{v}}
\item 
Vector\+Xd \mbox{\hyperlink{ik_8cpp_a5bfb1324e92ea279c5738b60b67418b1}{w}}
\item 
Vector\+Xd \mbox{\hyperlink{ik_8cpp_a421689437204a5d93bb79c17f06c27b5}{a}}
\item 
Vector\+Xd \mbox{\hyperlink{ik_8cpp_a4140c2cc2c5ca4d7a7d7e6736b3a2284}{qdot}}
\item 
ros\+::\+Service\+Client \mbox{\hyperlink{ik_8cpp_a17bcd065930a8a7f9f194078d9977268}{client}}
\item 
math\+\_\+pkg\+::\+Safety \mbox{\hyperlink{ik_8cpp_ae661ca16c4508532e2c8a45a331da941}{safe\+Srv}}
\item 
const double \mbox{\hyperlink{ik_8cpp_ad7bc034eb1d46017a0ba12a4d9ffbca0}{thr\+\_\+still}} = 1e-\/4
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{ik_8cpp_a75bcee4b28157d51fa12c57a1a5d321a}\label{ik_8cpp_a75bcee4b28157d51fa12c57a1a5d321a}} 
\index{ik.cpp@{ik.cpp}!Kp@{Kp}}
\index{Kp@{Kp}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{Kp}{Kp}}
{\footnotesize\ttfamily \#define Kp~100}

Linear positional gain for tracking in C\+L\+I\+K2. 

Definition at line 16 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_a553bd3e9c9988b9d431bf9e0420abcf5}\label{ik_8cpp_a553bd3e9c9988b9d431bf9e0420abcf5}} 
\index{ik.cpp@{ik.cpp}!Kpp@{Kpp}}
\index{Kpp@{Kpp}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{Kpp}{Kpp}}
{\footnotesize\ttfamily \#define Kpp~10}

Linear positional gain for tracking in C\+L\+I\+K1. 

Definition at line 14 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_aed79ea7ebd60702427ead2f5e5bf2e33}\label{ik_8cpp_aed79ea7ebd60702427ead2f5e5bf2e33}} 
\index{ik.cpp@{ik.cpp}!Krot@{Krot}}
\index{Krot@{Krot}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{Krot}{Krot}}
{\footnotesize\ttfamily \#define Krot~10}

Rotational gain for tracking. 

Definition at line 20 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_a2fe2438f5734a46e720a5640bbb51e51}\label{ik_8cpp_a2fe2438f5734a46e720a5640bbb51e51}} 
\index{ik.cpp@{ik.cpp}!Kv@{Kv}}
\index{Kv@{Kv}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{Kv}{Kv}}
{\footnotesize\ttfamily \#define Kv~20}

Linear velocity gain for tracking in C\+L\+I\+K2. 

Definition at line 18 of file ik.\+cpp.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{ik_8cpp_a1846e5628d757e6a4677ee16a0e252ee}\label{ik_8cpp_a1846e5628d757e6a4677ee16a0e252ee}} 
\index{ik.cpp@{ik.cpp}!computeIKqdot@{computeIKqdot}}
\index{computeIKqdot@{computeIKqdot}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{computeIKqdot()}{computeIKqdot()}}
{\footnotesize\ttfamily bool compute\+I\+Kqdot (\begin{DoxyParamCaption}\item[{math\+\_\+pkg\+::\+I\+K\+::\+Request \&}]{req,  }\item[{math\+\_\+pkg\+::\+I\+K\+::\+Response \&}]{res }\end{DoxyParamCaption})}

Service function for the Safety service, which computes the partial joint velocities based on the safety task. 
\begin{DoxyParams}{Parameters}
{\em req} & Server request. \\
\hline
{\em res} & Server response. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if client-\/service call succeeded, false otherwise. 
\end{DoxyReturn}


Definition at line 166 of file ik.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{166                                                                      \{}
\DoxyCodeLine{167     \textcolor{comment}{//clock\_t begin = clock(); // timing}}
\DoxyCodeLine{168     \textcolor{keywordflow}{if} (\mbox{\hyperlink{ik_8cpp_a17bcd065930a8a7f9f194078d9977268}{client}}.call(\mbox{\hyperlink{ik_8cpp_ae661ca16c4508532e2c8a45a331da941}{safeSrv}})) \{ \textcolor{comment}{// if all subscription data is available and service call succeeded}}
\DoxyCodeLine{169         \textcolor{keywordflow}{if} (!(\mbox{\hyperlink{ik_8cpp_a6f7516c9986aa294222c95551c197aed}{readyJ}} \&\& \mbox{\hyperlink{ik_8cpp_a7c41d2b61d03bb16bf9def8d3f024b81}{readyErr}} \&\& \mbox{\hyperlink{ik_8cpp_afdc2b8cff05834f1a3733c9186e98ca3}{readyVwa}} \&\& \mbox{\hyperlink{ik_8cpp_a264031af035928b59314f611ace3c38d}{readyqdot}})) \{ \textcolor{comment}{// at least one subscribtion data is missing}}
\DoxyCodeLine{170             \mbox{\hyperlink{ik_8cpp_a6f7516c9986aa294222c95551c197aed}{readyJ}} = \mbox{\hyperlink{ik_8cpp_a7c41d2b61d03bb16bf9def8d3f024b81}{readyErr}} = \mbox{\hyperlink{ik_8cpp_afdc2b8cff05834f1a3733c9186e98ca3}{readyVwa}} = \mbox{\hyperlink{ik_8cpp_a264031af035928b59314f611ace3c38d}{readyqdot}} = \textcolor{keyword}{false}; \textcolor{comment}{// reset availability flags}}
\DoxyCodeLine{171             ROS\_ERROR(\textcolor{stringliteral}{"{}ik service could not run: missing data."{}});}
\DoxyCodeLine{172             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{173         \}}
\DoxyCodeLine{174         \mbox{\hyperlink{ik_8cpp_a6f7516c9986aa294222c95551c197aed}{readyJ}} = \mbox{\hyperlink{ik_8cpp_a7c41d2b61d03bb16bf9def8d3f024b81}{readyErr}} = \mbox{\hyperlink{ik_8cpp_afdc2b8cff05834f1a3733c9186e98ca3}{readyVwa}} = \mbox{\hyperlink{ik_8cpp_a264031af035928b59314f611ace3c38d}{readyqdot}} = \textcolor{keyword}{false}; \textcolor{comment}{// reset availability flags}}
\DoxyCodeLine{175         \textcolor{keywordtype}{double} cond;}
\DoxyCodeLine{176 }
\DoxyCodeLine{177         \textcolor{comment}{// Map the vectors returned by the call into Eigen library objects.}}
\DoxyCodeLine{178         VectorXd partialqdot = Map<VectorXd>(\mbox{\hyperlink{ik_8cpp_ae661ca16c4508532e2c8a45a331da941}{safeSrv}}.response.qdot.velocity.data(),\mbox{\hyperlink{utilities_8h_a02e7d9123cf9196d84fc399cf563e378}{NJOINTS}});}
\DoxyCodeLine{179         MatrixXd Q1 = Map<MatrixXd>(\mbox{\hyperlink{ik_8cpp_ae661ca16c4508532e2c8a45a331da941}{safeSrv}}.response.Q1.data.data(),\mbox{\hyperlink{utilities_8h_a02e7d9123cf9196d84fc399cf563e378}{NJOINTS}},\mbox{\hyperlink{utilities_8h_a02e7d9123cf9196d84fc399cf563e378}{NJOINTS}});}
\DoxyCodeLine{180 }
\DoxyCodeLine{181         \textcolor{comment}{// Compute Q2 matrix and store it in std::vector}}
\DoxyCodeLine{182         MatrixXd Q2 = Q1*(\mbox{\hyperlink{utilities_8h_af89a8758592469410415b30b4c8accda}{ID\_MATRIX\_NJ}} -\/ \mbox{\hyperlink{utilities_8h_a66dede39bc52472042a84f87099ec816}{regPinv}}(\mbox{\hyperlink{ik_8cpp_af2f8d0151c18d9e648b6353879e885ad}{J}}*Q1,\mbox{\hyperlink{utilities_8h_a47db7d9ba8c0a5a126ac3d7dfc225f14}{ID\_MATRIX\_SPACE\_DOFS}},\mbox{\hyperlink{utilities_8h_af89a8758592469410415b30b4c8accda}{ID\_MATRIX\_NJ}},\mbox{\hyperlink{utilities_8h_af77edc1f833593caecfc032dcc5953a6}{ETA}},cond)*\mbox{\hyperlink{ik_8cpp_af2f8d0151c18d9e648b6353879e885ad}{J}}*Q1);}
\DoxyCodeLine{183         Map<MatrixXd> Q2v (Q2.data(), \mbox{\hyperlink{utilities_8h_a02e7d9123cf9196d84fc399cf563e378}{NJOINTS}}*\mbox{\hyperlink{utilities_8h_a02e7d9123cf9196d84fc399cf563e378}{NJOINTS}},1);}
\DoxyCodeLine{184         res.Q2.data = vector<double> (Q2v.data(), Q2v.data() + Q2v.size());}
\DoxyCodeLine{185 }
\DoxyCodeLine{186         \mbox{\hyperlink{ik_8cpp_a7758ed623a0641a8b7e3af2757ee995d}{JL}} = \mbox{\hyperlink{ik_8cpp_af2f8d0151c18d9e648b6353879e885ad}{J}}.block<3,\mbox{\hyperlink{utilities_8h_a02e7d9123cf9196d84fc399cf563e378}{NJOINTS}}>(0,0); \textcolor{comment}{// Extract linear part of the Jacobian matrix.}}
\DoxyCodeLine{187         \textcolor{keywordflow}{if} (\mbox{\hyperlink{ik_8cpp_a2d738c8295c5f93e95c3285c32f9cbf2}{firstStep}}) \mbox{\hyperlink{ik_8cpp_a2d738c8295c5f93e95c3285c32f9cbf2}{firstStep}} = \textcolor{keyword}{false};}
\DoxyCodeLine{188         \textcolor{keywordflow}{else} \mbox{\hyperlink{ik_8cpp_a8612eee4d704ec14a5ca709c3420cc32}{JLdot}} = (\mbox{\hyperlink{ik_8cpp_a7758ed623a0641a8b7e3af2757ee995d}{JL}} -\/ \mbox{\hyperlink{ik_8cpp_a9537bb8ee75512fd2472edec284939e5}{JLold}}) / \mbox{\hyperlink{utilities_8h_a943f07034774ef1261d62cd0d3d1fec9}{DT}}; \textcolor{comment}{// unless it's the first step, compute JLdot as a finite difference of linear Jacobian matrices.}}
\DoxyCodeLine{189 }
\DoxyCodeLine{190         \textcolor{comment}{// Compute the non-\/optimized joint velocities.}}
\DoxyCodeLine{191         VectorXd qdot1; \textcolor{comment}{// will contain qdot computed according to closed loop IK first order.}}
\DoxyCodeLine{192         VectorXd qdot2; \textcolor{comment}{// will contain qdot computed according to closed loop IK second order.}}
\DoxyCodeLine{193         \mbox{\hyperlink{ik_8cpp_acafa8cf25b8c003a979ecedf2ee99c96}{computeqdot}}(partialqdot,Q1,\mbox{\hyperlink{ik_8cpp_af2f8d0151c18d9e648b6353879e885ad}{J}},\mbox{\hyperlink{ik_8cpp_a7758ed623a0641a8b7e3af2757ee995d}{JL}},\mbox{\hyperlink{ik_8cpp_a8612eee4d704ec14a5ca709c3420cc32}{JLdot}},\mbox{\hyperlink{ik_8cpp_a4140c2cc2c5ca4d7a7d7e6736b3a2284}{qdot}},\mbox{\hyperlink{ik_8cpp_a256d9bdd4efdff0fe88509ce8f4cfad1}{eta}},\mbox{\hyperlink{ik_8cpp_aa29e2357b44fae23c369d605bdf60fd8}{rho}},\mbox{\hyperlink{ik_8cpp_ac33b218b57ffc035f4308de318222cf5}{nu}},\mbox{\hyperlink{ik_8cpp_a6a84fd0a294af9b7ef769d241dfbdf96}{v}},\mbox{\hyperlink{ik_8cpp_a5bfb1324e92ea279c5738b60b67418b1}{w}},\mbox{\hyperlink{ik_8cpp_a421689437204a5d93bb79c17f06c27b5}{a}},qdot1,qdot2);}
\DoxyCodeLine{194         \mbox{\hyperlink{ik_8cpp_a9537bb8ee75512fd2472edec284939e5}{JLold}} = \mbox{\hyperlink{ik_8cpp_a7758ed623a0641a8b7e3af2757ee995d}{JL}}; \textcolor{comment}{// update JLold}}
\DoxyCodeLine{195         }
\DoxyCodeLine{196         \textcolor{comment}{// Fill response objects.}}
\DoxyCodeLine{197         res.qdot1.velocity = vector<double> (qdot1.data(), qdot1.data() + qdot1.size());}
\DoxyCodeLine{198         res.qdot2.velocity = vector<double> (qdot2.data(), qdot2.data() + qdot2.size());}
\DoxyCodeLine{199     \}}
\DoxyCodeLine{200     \textcolor{keywordflow}{else} \{ \textcolor{comment}{// if all subscription data is available but service call did not succeed}}
\DoxyCodeLine{201         \mbox{\hyperlink{ik_8cpp_a6f7516c9986aa294222c95551c197aed}{readyJ}} = \mbox{\hyperlink{ik_8cpp_a7c41d2b61d03bb16bf9def8d3f024b81}{readyErr}} = \mbox{\hyperlink{ik_8cpp_afdc2b8cff05834f1a3733c9186e98ca3}{readyVwa}} = \mbox{\hyperlink{ik_8cpp_a264031af035928b59314f611ace3c38d}{readyqdot}} = \textcolor{keyword}{false}; \textcolor{comment}{// reset availability flags}}
\DoxyCodeLine{202         ROS\_ERROR(\textcolor{stringliteral}{"{}Call to safety service failed."{}});}
\DoxyCodeLine{203         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{204     \}}
\DoxyCodeLine{205 }
\DoxyCodeLine{206     \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \textcolor{comment}{// call succeeded}}
\DoxyCodeLine{207 \}}

\end{DoxyCode}
\mbox{\Hypertarget{ik_8cpp_acafa8cf25b8c003a979ecedf2ee99c96}\label{ik_8cpp_acafa8cf25b8c003a979ecedf2ee99c96}} 
\index{ik.cpp@{ik.cpp}!computeqdot@{computeqdot}}
\index{computeqdot@{computeqdot}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{computeqdot()}{computeqdot()}}
{\footnotesize\ttfamily void computeqdot (\begin{DoxyParamCaption}\item[{Vector\+Xd}]{partialqdot,  }\item[{Matrix\+Xd}]{Q1,  }\item[{Matrix\+Xd}]{J,  }\item[{Matrix\+Xd}]{JL,  }\item[{Matrix\+Xd}]{J\+Ldot,  }\item[{Vector\+Xd}]{qdot,  }\item[{Vector\+Xd}]{eta,  }\item[{Vector\+Xd}]{rho,  }\item[{Vector\+Xd}]{etadot,  }\item[{Vector\+Xd}]{v,  }\item[{Vector\+Xd}]{w,  }\item[{Vector\+Xd}]{a,  }\item[{Vector\+Xd \&}]{qdot1,  }\item[{Vector\+Xd \&}]{qdot2 }\end{DoxyParamCaption})}

Function that computes non-\/optimized qdot with 2 C\+L\+IK algorithms. 
\begin{DoxyParams}{Parameters}
{\em partialqdot} & Safety task based qdot vector. \\
\hline
{\em Q1} & Auxiliary matrix for tracking task. \\
\hline
{\em J} & Jacobian matrix. \\
\hline
{\em JL} & Linear Jacobian matrix. \\
\hline
{\em J\+Ldot} & Derivative of linear Jacobian matrix. \\
\hline
{\em qdot} & Previous qdot vector. \\
\hline
{\em eta} & Linear error vector. \\
\hline
{\em rho} & Rotational error vector. \\
\hline
{\em etadot} & Linear velocity error vector. \\
\hline
{\em v} & Target velocity vector. \\
\hline
{\em w} & Target angular velocity vector. \\
\hline
{\em a} & Target acceleration vector. \\
\hline
{\em qdot1} & Reference to C\+L\+IK 1st order solution, to be filled. \\
\hline
{\em qdot2} & Reference to C\+L\+IK 2nd order solution, to be filled. \\
\hline
\end{DoxyParams}


Definition at line 137 of file ik.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{139                                                                       \{}
\DoxyCodeLine{140     VectorXd ve1 = \mbox{\hyperlink{ik_8cpp_a6a84fd0a294af9b7ef769d241dfbdf96}{v}} + \mbox{\hyperlink{ik_8cpp_a553bd3e9c9988b9d431bf9e0420abcf5}{Kpp}}*\mbox{\hyperlink{ik_8cpp_a256d9bdd4efdff0fe88509ce8f4cfad1}{eta}}; \textcolor{comment}{// ee lin velocity for CLIK1}}
\DoxyCodeLine{141     VectorXd ve2 = \mbox{\hyperlink{utilities_8h_a943f07034774ef1261d62cd0d3d1fec9}{DT}}*(\mbox{\hyperlink{ik_8cpp_a421689437204a5d93bb79c17f06c27b5}{a}} -\/ \mbox{\hyperlink{ik_8cpp_a8612eee4d704ec14a5ca709c3420cc32}{JLdot}}*\mbox{\hyperlink{ik_8cpp_a4140c2cc2c5ca4d7a7d7e6736b3a2284}{qdot}} + \mbox{\hyperlink{ik_8cpp_a2fe2438f5734a46e720a5640bbb51e51}{Kv}}*etadot + \mbox{\hyperlink{ik_8cpp_a75bcee4b28157d51fa12c57a1a5d321a}{Kp}}*\mbox{\hyperlink{ik_8cpp_a256d9bdd4efdff0fe88509ce8f4cfad1}{eta}}) + \mbox{\hyperlink{ik_8cpp_a7758ed623a0641a8b7e3af2757ee995d}{JL}}*\mbox{\hyperlink{ik_8cpp_a4140c2cc2c5ca4d7a7d7e6736b3a2284}{qdot}}; \textcolor{comment}{// ee lin velocity for CLIK2}}
\DoxyCodeLine{142     VectorXd xedot1 = VectorXd(6);}
\DoxyCodeLine{143     VectorXd xedot2 = VectorXd(6);}
\DoxyCodeLine{144     xedot1 << ve1,\mbox{\hyperlink{ik_8cpp_a5bfb1324e92ea279c5738b60b67418b1}{w}}+\mbox{\hyperlink{ik_8cpp_aed79ea7ebd60702427ead2f5e5bf2e33}{Krot}}*\mbox{\hyperlink{ik_8cpp_aa29e2357b44fae23c369d605bdf60fd8}{rho}}; \textcolor{comment}{// ee velocity for CLIK1}}
\DoxyCodeLine{145     xedot2 << ve2,\mbox{\hyperlink{ik_8cpp_a5bfb1324e92ea279c5738b60b67418b1}{w}}+\mbox{\hyperlink{ik_8cpp_aed79ea7ebd60702427ead2f5e5bf2e33}{Krot}}*\mbox{\hyperlink{ik_8cpp_aa29e2357b44fae23c369d605bdf60fd8}{rho}}; \textcolor{comment}{// ee velocity for CLIK2}}
\DoxyCodeLine{146     \textcolor{keywordtype}{double} cond;}
\DoxyCodeLine{147     \textcolor{comment}{/* qdots are computed according to the paper "{}A Novel Practical Technique to Integrate Inequality Control}}
\DoxyCodeLine{148 \textcolor{comment}{     * Objectives and Task Transitions in Priority Based Control"{} by Casalino \& Simetti, pp. 16-\/17, sec. 3.4. */}}
\DoxyCodeLine{149     MatrixXd JTimesQ1 = \mbox{\hyperlink{ik_8cpp_af2f8d0151c18d9e648b6353879e885ad}{J}}*Q1;}
\DoxyCodeLine{150     MatrixXd pinvAux = \mbox{\hyperlink{utilities_8h_a66dede39bc52472042a84f87099ec816}{regPinv}}(JTimesQ1,\mbox{\hyperlink{utilities_8h_a47db7d9ba8c0a5a126ac3d7dfc225f14}{ID\_MATRIX\_SPACE\_DOFS}},Q1,\mbox{\hyperlink{utilities_8h_af77edc1f833593caecfc032dcc5953a6}{ETA}},cond);}
\DoxyCodeLine{151     MatrixXd pinvQZero = \mbox{\hyperlink{utilities_8h_a66dede39bc52472042a84f87099ec816}{regPinv}}(JTimesQ1,\mbox{\hyperlink{utilities_8h_a47db7d9ba8c0a5a126ac3d7dfc225f14}{ID\_MATRIX\_SPACE\_DOFS}},\mbox{\hyperlink{utilities_8h_af89a8758592469410415b30b4c8accda}{ID\_MATRIX\_NJ}},\mbox{\hyperlink{utilities_8h_af77edc1f833593caecfc032dcc5953a6}{ETA}},cond);}
\DoxyCodeLine{152     MatrixXd W2 = JTimesQ1*pinvAux;}
\DoxyCodeLine{153     MatrixXd tempProduct1 = Q1*pinvQZero*W2;}
\DoxyCodeLine{154     MatrixXd tempProduct2 = \mbox{\hyperlink{ik_8cpp_af2f8d0151c18d9e648b6353879e885ad}{J}}*partialqdot;}
\DoxyCodeLine{155 }
\DoxyCodeLine{156     qdot1 = partialqdot + tempProduct1 * (xedot1 -\/ tempProduct2);}
\DoxyCodeLine{157     qdot2 = partialqdot + tempProduct1 * (xedot2 -\/ tempProduct2);}
\DoxyCodeLine{158 \}}

\end{DoxyCode}
\mbox{\Hypertarget{ik_8cpp_a1397a016ca869e0fb6ead4b7b52f3f13}\label{ik_8cpp_a1397a016ca869e0fb6ead4b7b52f3f13}} 
\index{ik.cpp@{ik.cpp}!ikCallbackErr@{ikCallbackErr}}
\index{ikCallbackErr@{ikCallbackErr}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{ikCallbackErr()}{ikCallbackErr()}}
{\footnotesize\ttfamily void ik\+Callback\+Err (\begin{DoxyParamCaption}\item[{const std\+\_\+msgs\+::\+Float64\+Multi\+Array \&}]{msg }\end{DoxyParamCaption})}

Callback function for error vectors. 
\begin{DoxyParams}{Parameters}
{\em msg} & The received error vectors. \\
\hline
\end{DoxyParams}


Definition at line 77 of file ik.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{78 \{}
\DoxyCodeLine{79     vector<double> rcvdErr = msg.data;}
\DoxyCodeLine{80     \mbox{\hyperlink{ik_8cpp_aa29e2357b44fae23c369d605bdf60fd8}{rho}} = Map<VectorXd>(rcvdErr.data(),3);}
\DoxyCodeLine{81     \mbox{\hyperlink{ik_8cpp_a256d9bdd4efdff0fe88509ce8f4cfad1}{eta}} = Map<VectorXd>(rcvdErr.data()+3,3);}
\DoxyCodeLine{82     \mbox{\hyperlink{ik_8cpp_ac33b218b57ffc035f4308de318222cf5}{nu}} = Map<VectorXd>(rcvdErr.data()+6,3);}
\DoxyCodeLine{83     \textcolor{keywordflow}{if} (abs(\mbox{\hyperlink{ik_8cpp_a256d9bdd4efdff0fe88509ce8f4cfad1}{eta}}(0)) < \mbox{\hyperlink{ik_8cpp_ad7bc034eb1d46017a0ba12a4d9ffbca0}{thr\_still}} \&\& abs(\mbox{\hyperlink{ik_8cpp_a256d9bdd4efdff0fe88509ce8f4cfad1}{eta}}(1)) < \mbox{\hyperlink{ik_8cpp_ad7bc034eb1d46017a0ba12a4d9ffbca0}{thr\_still}} \&\& abs(\mbox{\hyperlink{ik_8cpp_a256d9bdd4efdff0fe88509ce8f4cfad1}{eta}}(2)) < \mbox{\hyperlink{ik_8cpp_ad7bc034eb1d46017a0ba12a4d9ffbca0}{thr\_still}} \&\&}
\DoxyCodeLine{84         abs(\mbox{\hyperlink{ik_8cpp_aa29e2357b44fae23c369d605bdf60fd8}{rho}}(0)) < \mbox{\hyperlink{ik_8cpp_ad7bc034eb1d46017a0ba12a4d9ffbca0}{thr\_still}} \&\& abs(\mbox{\hyperlink{ik_8cpp_aa29e2357b44fae23c369d605bdf60fd8}{rho}}(1)) < \mbox{\hyperlink{ik_8cpp_ad7bc034eb1d46017a0ba12a4d9ffbca0}{thr\_still}} \&\& abs(\mbox{\hyperlink{ik_8cpp_aa29e2357b44fae23c369d605bdf60fd8}{rho}}(2)) < \mbox{\hyperlink{ik_8cpp_ad7bc034eb1d46017a0ba12a4d9ffbca0}{thr\_still}}) \{}
\DoxyCodeLine{85             \mbox{\hyperlink{ik_8cpp_a256d9bdd4efdff0fe88509ce8f4cfad1}{eta}}(0) = \mbox{\hyperlink{ik_8cpp_a256d9bdd4efdff0fe88509ce8f4cfad1}{eta}}(1) = \mbox{\hyperlink{ik_8cpp_a256d9bdd4efdff0fe88509ce8f4cfad1}{eta}}(2) = \mbox{\hyperlink{ik_8cpp_aa29e2357b44fae23c369d605bdf60fd8}{rho}}(0) = \mbox{\hyperlink{ik_8cpp_aa29e2357b44fae23c369d605bdf60fd8}{rho}}(1) = \mbox{\hyperlink{ik_8cpp_aa29e2357b44fae23c369d605bdf60fd8}{rho}}(2) = \mbox{\hyperlink{ik_8cpp_ac33b218b57ffc035f4308de318222cf5}{nu}}(0) = \mbox{\hyperlink{ik_8cpp_ac33b218b57ffc035f4308de318222cf5}{nu}}(1) = \mbox{\hyperlink{ik_8cpp_ac33b218b57ffc035f4308de318222cf5}{nu}}(2) = 0;}
\DoxyCodeLine{86             \mbox{\hyperlink{utilities_8h_a43f47e95fd166d0196566027623721c5}{stay\_still}} = \textcolor{keyword}{true};}
\DoxyCodeLine{87     \}}
\DoxyCodeLine{88     \textcolor{keywordflow}{else} \mbox{\hyperlink{utilities_8h_a43f47e95fd166d0196566027623721c5}{stay\_still}} = \textcolor{keyword}{false};}
\DoxyCodeLine{89 }
\DoxyCodeLine{90     \mbox{\hyperlink{ik_8cpp_a7c41d2b61d03bb16bf9def8d3f024b81}{readyErr}} = \textcolor{keyword}{true};}
\DoxyCodeLine{91 \}}

\end{DoxyCode}
\mbox{\Hypertarget{ik_8cpp_a6e3db3fb5d09f9eae91c8d2b511498d1}\label{ik_8cpp_a6e3db3fb5d09f9eae91c8d2b511498d1}} 
\index{ik.cpp@{ik.cpp}!ikCallbackJ@{ikCallbackJ}}
\index{ikCallbackJ@{ikCallbackJ}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{ikCallbackJ()}{ikCallbackJ()}}
{\footnotesize\ttfamily void ik\+CallbackJ (\begin{DoxyParamCaption}\item[{const std\+\_\+msgs\+::\+Float64\+Multi\+Array \&}]{msg }\end{DoxyParamCaption})}

Callback function for Jacobian matrix. 
\begin{DoxyParams}{Parameters}
{\em msg} & The received Jacobian matrix. \\
\hline
\end{DoxyParams}


Definition at line 64 of file ik.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{65 \{}
\DoxyCodeLine{66 }
\DoxyCodeLine{67     vector<double> rcvdJ = msg.data;}
\DoxyCodeLine{68     \mbox{\hyperlink{ik_8cpp_af2f8d0151c18d9e648b6353879e885ad}{J}} = Map<MatrixXd>(rcvdJ.data(),\mbox{\hyperlink{utilities_8h_a02e7d9123cf9196d84fc399cf563e378}{NJOINTS}},6).transpose();}
\DoxyCodeLine{69     \mbox{\hyperlink{ik_8cpp_a6f7516c9986aa294222c95551c197aed}{readyJ}} = \textcolor{keyword}{true};}
\DoxyCodeLine{70 \}}

\end{DoxyCode}
\mbox{\Hypertarget{ik_8cpp_af6b566518a248f56891967bfecfbadec}\label{ik_8cpp_af6b566518a248f56891967bfecfbadec}} 
\index{ik.cpp@{ik.cpp}!ikCallbackqdot@{ikCallbackqdot}}
\index{ikCallbackqdot@{ikCallbackqdot}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{ikCallbackqdot()}{ikCallbackqdot()}}
{\footnotesize\ttfamily void ik\+Callbackqdot (\begin{DoxyParamCaption}\item[{const sensor\+\_\+msgs\+::\+Joint\+State \&}]{msg }\end{DoxyParamCaption})}

Callback function for joint velocities. 
\begin{DoxyParams}{Parameters}
{\em msg} & The received joint velocities vector. \\
\hline
\end{DoxyParams}


Definition at line 112 of file ik.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{113 \{}
\DoxyCodeLine{114     vector<double> rcvdqdot = msg.velocity;}
\DoxyCodeLine{115     \mbox{\hyperlink{ik_8cpp_a4140c2cc2c5ca4d7a7d7e6736b3a2284}{qdot}} = Map<VectorXd>(rcvdqdot.data(),\mbox{\hyperlink{utilities_8h_a02e7d9123cf9196d84fc399cf563e378}{NJOINTS}});}
\DoxyCodeLine{116     \mbox{\hyperlink{ik_8cpp_a264031af035928b59314f611ace3c38d}{readyqdot}} = \textcolor{keyword}{true};}
\DoxyCodeLine{117 \}}

\end{DoxyCode}
\mbox{\Hypertarget{ik_8cpp_a2a38e2034f596fd71dc9dd5940c14994}\label{ik_8cpp_a2a38e2034f596fd71dc9dd5940c14994}} 
\index{ik.cpp@{ik.cpp}!ikCallbackVwa@{ikCallbackVwa}}
\index{ikCallbackVwa@{ikCallbackVwa}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{ikCallbackVwa()}{ikCallbackVwa()}}
{\footnotesize\ttfamily void ik\+Callback\+Vwa (\begin{DoxyParamCaption}\item[{const std\+\_\+msgs\+::\+Float64\+Multi\+Array \&}]{msg }\end{DoxyParamCaption})}

Callback function for tracking signals. 
\begin{DoxyParams}{Parameters}
{\em msg} & The received tracking signals (target linear velocity,angular velocity,linear acceleration). \\
\hline
\end{DoxyParams}


Definition at line 98 of file ik.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{99 \{}
\DoxyCodeLine{100     vector<double> rcvdVwa = msg.data;}
\DoxyCodeLine{101     \mbox{\hyperlink{ik_8cpp_a6a84fd0a294af9b7ef769d241dfbdf96}{v}} = Map<VectorXd>(rcvdVwa.data(),3);}
\DoxyCodeLine{102     \mbox{\hyperlink{ik_8cpp_a5bfb1324e92ea279c5738b60b67418b1}{w}} = Map<VectorXd>(rcvdVwa.data()+3,3);}
\DoxyCodeLine{103     \mbox{\hyperlink{ik_8cpp_a421689437204a5d93bb79c17f06c27b5}{a}} = Map<VectorXd>(rcvdVwa.data()+6,3);}
\DoxyCodeLine{104     \mbox{\hyperlink{ik_8cpp_afdc2b8cff05834f1a3733c9186e98ca3}{readyVwa}} = \textcolor{keyword}{true};}
\DoxyCodeLine{105 \}}

\end{DoxyCode}
\mbox{\Hypertarget{ik_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{ik_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{ik.cpp@{ik.cpp}!main@{main}}
\index{main@{main}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}

Main function of the node. 

Definition at line 213 of file ik.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{213                                \{}
\DoxyCodeLine{214     ros::init(argc, argv, \textcolor{stringliteral}{"{}ik\_server"{}}); \textcolor{comment}{// initialize node}}
\DoxyCodeLine{215     ros::NodeHandle n; \textcolor{comment}{// define node handle}}
\DoxyCodeLine{216     \textcolor{keywordtype}{int} queSize = 10;}
\DoxyCodeLine{217     ros::Subscriber sub1 = n.subscribe(\textcolor{stringliteral}{"{}jacobian"{}}, queSize, \mbox{\hyperlink{ik_8cpp_a6e3db3fb5d09f9eae91c8d2b511498d1}{ikCallbackJ}}); \textcolor{comment}{// subscribe to Jacobian}}
\DoxyCodeLine{218     ros::Subscriber sub2 = n.subscribe(\textcolor{stringliteral}{"{}errors"{}}, queSize, \mbox{\hyperlink{ik_8cpp_a1397a016ca869e0fb6ead4b7b52f3f13}{ikCallbackErr}}); \textcolor{comment}{// subscribe to errors}}
\DoxyCodeLine{219     ros::Subscriber sub3 = n.subscribe(\textcolor{stringliteral}{"{}tracking"{}}, queSize, \mbox{\hyperlink{ik_8cpp_a2a38e2034f596fd71dc9dd5940c14994}{ikCallbackVwa}}); \textcolor{comment}{// subscribe to tracking signals}}
\DoxyCodeLine{220     ros::Subscriber sub4 = n.subscribe(\textcolor{stringliteral}{"{}cmdtopic"{}}, queSize, \mbox{\hyperlink{ik_8cpp_af6b566518a248f56891967bfecfbadec}{ikCallbackqdot}}); \textcolor{comment}{// describe to weighter}}
\DoxyCodeLine{221     }
\DoxyCodeLine{222     ros::ServiceServer service = n.advertiseService(\textcolor{stringliteral}{"{}ik"{}}, \mbox{\hyperlink{ik_8cpp_a1846e5628d757e6a4677ee16a0e252ee}{computeIKqdot}}); \textcolor{comment}{// activate IK service}}
\DoxyCodeLine{223     }
\DoxyCodeLine{224     \mbox{\hyperlink{ik_8cpp_a17bcd065930a8a7f9f194078d9977268}{client}} = n.serviceClient<math\_pkg::Safety>(\textcolor{stringliteral}{"{}safety"{}}); \textcolor{comment}{// IK is client of Safety}}
\DoxyCodeLine{225 }
\DoxyCodeLine{226     \mbox{\hyperlink{ik_8cpp_a8612eee4d704ec14a5ca709c3420cc32}{JLdot}} = MatrixXd::Zero(3,\mbox{\hyperlink{utilities_8h_a02e7d9123cf9196d84fc399cf563e378}{NJOINTS}});}
\DoxyCodeLine{227 }
\DoxyCodeLine{228     ros::spin(); \textcolor{comment}{// keep the node alive}}
\DoxyCodeLine{229     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{230 \}}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{ik_8cpp_a421689437204a5d93bb79c17f06c27b5}\label{ik_8cpp_a421689437204a5d93bb79c17f06c27b5}} 
\index{ik.cpp@{ik.cpp}!a@{a}}
\index{a@{a}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{a}{a}}
{\footnotesize\ttfamily Vector\+Xd a}

Current linear acceleration vector. 

Definition at line 50 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_a17bcd065930a8a7f9f194078d9977268}\label{ik_8cpp_a17bcd065930a8a7f9f194078d9977268}} 
\index{ik.cpp@{ik.cpp}!client@{client}}
\index{client@{client}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{client}{client}}
{\footnotesize\ttfamily ros\+::\+Service\+Client client}

Client object needed to perform service calls. 

Definition at line 54 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_a256d9bdd4efdff0fe88509ce8f4cfad1}\label{ik_8cpp_a256d9bdd4efdff0fe88509ce8f4cfad1}} 
\index{ik.cpp@{ik.cpp}!eta@{eta}}
\index{eta@{eta}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{eta}{eta}}
{\footnotesize\ttfamily Vector\+Xd eta}

Current linear error vector. 

Definition at line 40 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_a2d738c8295c5f93e95c3285c32f9cbf2}\label{ik_8cpp_a2d738c8295c5f93e95c3285c32f9cbf2}} 
\index{ik.cpp@{ik.cpp}!firstStep@{firstStep}}
\index{firstStep@{firstStep}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{firstStep}{firstStep}}
{\footnotesize\ttfamily bool first\+Step = true}

First step flag. 

Definition at line 22 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_af2f8d0151c18d9e648b6353879e885ad}\label{ik_8cpp_af2f8d0151c18d9e648b6353879e885ad}} 
\index{ik.cpp@{ik.cpp}!J@{J}}
\index{J@{J}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{J}{J}}
{\footnotesize\ttfamily Matrix\+Xd J}

Current Jacobian matrix. 

Definition at line 32 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_a7758ed623a0641a8b7e3af2757ee995d}\label{ik_8cpp_a7758ed623a0641a8b7e3af2757ee995d}} 
\index{ik.cpp@{ik.cpp}!JL@{JL}}
\index{JL@{JL}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{JL}{JL}}
{\footnotesize\ttfamily Matrix\+Xd JL}

Current linear part of the Jacobian matrix. 

Definition at line 34 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_a8612eee4d704ec14a5ca709c3420cc32}\label{ik_8cpp_a8612eee4d704ec14a5ca709c3420cc32}} 
\index{ik.cpp@{ik.cpp}!JLdot@{JLdot}}
\index{JLdot@{JLdot}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{JLdot}{JLdot}}
{\footnotesize\ttfamily Matrix\+Xd J\+Ldot}

Current derivative of Jacobian matrix. 

Definition at line 36 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_a9537bb8ee75512fd2472edec284939e5}\label{ik_8cpp_a9537bb8ee75512fd2472edec284939e5}} 
\index{ik.cpp@{ik.cpp}!JLold@{JLold}}
\index{JLold@{JLold}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{JLold}{JLold}}
{\footnotesize\ttfamily Matrix\+Xd J\+Lold}

Previous value of linear part of the Jacobian matrix. 

Definition at line 38 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_ac33b218b57ffc035f4308de318222cf5}\label{ik_8cpp_ac33b218b57ffc035f4308de318222cf5}} 
\index{ik.cpp@{ik.cpp}!nu@{nu}}
\index{nu@{nu}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{nu}{nu}}
{\footnotesize\ttfamily Vector\+Xd nu}

Current linear velocity error vector. 

Definition at line 44 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_a4140c2cc2c5ca4d7a7d7e6736b3a2284}\label{ik_8cpp_a4140c2cc2c5ca4d7a7d7e6736b3a2284}} 
\index{ik.cpp@{ik.cpp}!qdot@{qdot}}
\index{qdot@{qdot}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{qdot}{qdot}}
{\footnotesize\ttfamily Vector\+Xd qdot}

Current joint velocities vector. 

Definition at line 52 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_a7c41d2b61d03bb16bf9def8d3f024b81}\label{ik_8cpp_a7c41d2b61d03bb16bf9def8d3f024b81}} 
\index{ik.cpp@{ik.cpp}!readyErr@{readyErr}}
\index{readyErr@{readyErr}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{readyErr}{readyErr}}
{\footnotesize\ttfamily bool ready\+Err}

Availability flag for error vector. 

Definition at line 26 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_a6f7516c9986aa294222c95551c197aed}\label{ik_8cpp_a6f7516c9986aa294222c95551c197aed}} 
\index{ik.cpp@{ik.cpp}!readyJ@{readyJ}}
\index{readyJ@{readyJ}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{readyJ}{readyJ}}
{\footnotesize\ttfamily bool readyJ}

Availability flag for Jacobian matrix. 

Definition at line 24 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_a264031af035928b59314f611ace3c38d}\label{ik_8cpp_a264031af035928b59314f611ace3c38d}} 
\index{ik.cpp@{ik.cpp}!readyqdot@{readyqdot}}
\index{readyqdot@{readyqdot}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{readyqdot}{readyqdot}}
{\footnotesize\ttfamily bool readyqdot}

Availability flag for joint velocities vector. 

Definition at line 30 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_afdc2b8cff05834f1a3733c9186e98ca3}\label{ik_8cpp_afdc2b8cff05834f1a3733c9186e98ca3}} 
\index{ik.cpp@{ik.cpp}!readyVwa@{readyVwa}}
\index{readyVwa@{readyVwa}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{readyVwa}{readyVwa}}
{\footnotesize\ttfamily bool ready\+Vwa}

Availability flag for tracking signals. 

Definition at line 28 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_aa29e2357b44fae23c369d605bdf60fd8}\label{ik_8cpp_aa29e2357b44fae23c369d605bdf60fd8}} 
\index{ik.cpp@{ik.cpp}!rho@{rho}}
\index{rho@{rho}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{rho}{rho}}
{\footnotesize\ttfamily Vector\+Xd rho}

Current rotational error vector. 

Definition at line 42 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_ae661ca16c4508532e2c8a45a331da941}\label{ik_8cpp_ae661ca16c4508532e2c8a45a331da941}} 
\index{ik.cpp@{ik.cpp}!safeSrv@{safeSrv}}
\index{safeSrv@{safeSrv}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{safeSrv}{safeSrv}}
{\footnotesize\ttfamily math\+\_\+pkg\+::\+Safety safe\+Srv}

Safety server object. 

Definition at line 56 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_ad7bc034eb1d46017a0ba12a4d9ffbca0}\label{ik_8cpp_ad7bc034eb1d46017a0ba12a4d9ffbca0}} 
\index{ik.cpp@{ik.cpp}!thr\_still@{thr\_still}}
\index{thr\_still@{thr\_still}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{thr\_still}{thr\_still}}
{\footnotesize\ttfamily const double thr\+\_\+still = 1e-\/4}

Threshold under which error is considered zero. 

Definition at line 58 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_a6a84fd0a294af9b7ef769d241dfbdf96}\label{ik_8cpp_a6a84fd0a294af9b7ef769d241dfbdf96}} 
\index{ik.cpp@{ik.cpp}!v@{v}}
\index{v@{v}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{v}{v}}
{\footnotesize\ttfamily Vector\+Xd v}

Current linear velocity vector. 

Definition at line 46 of file ik.\+cpp.

\mbox{\Hypertarget{ik_8cpp_a5bfb1324e92ea279c5738b60b67418b1}\label{ik_8cpp_a5bfb1324e92ea279c5738b60b67418b1}} 
\index{ik.cpp@{ik.cpp}!w@{w}}
\index{w@{w}!ik.cpp@{ik.cpp}}
\doxysubsubsection{\texorpdfstring{w}{w}}
{\footnotesize\ttfamily Vector\+Xd w}

Current angular velocity vector. 

Definition at line 48 of file ik.\+cpp.

